#include "stm32f103xb.h"
#include "spi.h"
#include "servo.h"
#include "ssd1306.h"

int main(void)
{
    SPI1_Init();

    // CHỜ NGUỒN ỔN (rất quan trọng khi có servo)
    for (volatile int i = 0; i < 1000000; i++);

    Servo_Init();
    SSD1306_Init();
    SSD1306_Clear();

    uint8_t angle = 0;

    while (1)
    {
        Servo_SetAngle(angle);
        SSD1306_Clear();
        SSD1306_Print("ANGLE");

        angle += 10;
        if (angle > 180) angle = 0;

        for (volatile int i = 0; i < 2000000; i++);
    }
}
